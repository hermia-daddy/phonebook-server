(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),c=t(2),l=function(e){var n=e.handleSearch,t=e.newSearchWord;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{onChange:n,value:t}))},i=function(e){var n=e.addPerson,t=e.handleOnPersonNameChange,a=e.handleOnPersonNumberChange,o=e.newName,u=e.newNumber;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:",r.a.createElement("input",{onChange:t,value:o})),r.a.createElement("div",null,"number:",r.a.createElement("input",{onChange:a,value:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var n=e.person,t=e.deletePerson;return console.log("delete person method",t),r.a.createElement("p",{key:n.name},n.name," ",n.number," ",r.a.createElement("button",{onClick:t},"delete"))},d=t(3),f=t.n(d),s="/api/persons",h=function(){return f.a.get(s).then((function(e){return e.data}))},b=function(e){return f.a.post(s,e).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(s,"/").concat(e)).then((function(n){return console.log(n),e}))},E=function(e){var n=e.message,t=e.error;return null!==n?r.a.createElement("div",{className:"message"},n):null!==t?r.a.createElement("div",{className:"error"},t):null},w=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),d=Object(c.a)(u,2),f=d[0],s=d[1],w=Object(a.useState)(""),O=Object(c.a)(w,2),g=O[0],j=O[1],C=Object(a.useState)(""),S=Object(c.a)(C,2),N=S[0],k=S[1],P=Object(a.useState)([]),y=Object(c.a)(P,2),L=y[0],x=y[1],T=Object(a.useState)(null),I=Object(c.a)(T,2),J=I[0],W=I[1],B=Object(a.useState)(null),D=Object(c.a)(B,2),q=D[0],z=D[1];Object(a.useEffect)((function(){h().then((function(e){o(e),x(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:J,error:q}),r.a.createElement(l,{handleSearch:function(e){if(k(e.target.value),e.target.value){var n=t.filter((function(n){return n.name.toLowerCase().indexOf(e.target.value.toLowerCase())>-1}));x(n)}else x(t)},newSearchWord:N}),r.a.createElement("h2",null,"add a new"),r.a.createElement(i,{addPerson:function(e){e.preventDefault();var n={name:f,number:g},a=t.find((function(e){return e.name===f}));a?window.confirm("".concat(a.name," is already added to phonebook,replace the old number with a new one ?"))&&v(a.id,n).then((function(e){o(t.map((function(n){return n.id===e.id?e:n}))),f.toLowerCase().indexOf(N.toLowerCase())>-1&&x(L.map((function(n){return n.id===e.id?e:n}))),W("change ".concat(f," number ").concat(g)),setTimeout((function(){W(null)}),5e3),s(""),j("")})):b(n).then((function(e){o(t.concat(e)),f.toLowerCase().indexOf(N.toLowerCase())>-1&&x(L.concat(e)),W("add ".concat(f)),setTimeout((function(){W(null)}),5e3),s(""),j("")}))},handleOnPersonNameChange:function(e){s(e.target.value)},handleOnPersonNumberChange:function(e){j(e.target.value)},newName:f,newNumber:g}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("div",null,L.map((function(e){return r.a.createElement(m,{key:e.id,person:e,deletePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("delete ".concat(n.name," ?"))&&p(e).then((function(n){o(t.filter((function(n){return n.id!==e}))),x(L.filter((function(n){return n.id!==e})))})).catch((function(n){var a=t.find((function(n){return n.id===e}));o(t.filter((function(n){return n.id!==e}))),x(L.filter((function(n){return n.id!==e}))),console.log("error:",n.response),z("Information of ".concat(a.name," has already been removed from server")),setTimeout((function(){z(null)}),5e3)}))}(e.id)}})}))))};t(36);u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.9e1e0205.chunk.js.map