{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","service/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","handleSearch","newSearchWord","onChange","value","PersonForm","addPerson","handleOnPersonNameChange","handleOnPersonNumberChange","newName","newNumber","onSubmit","type","Person","person","deletePerson","console","log","key","name","number","onClick","baseUrl","axios","get","then","response","data","personObject","post","id","put","delete","Notification","message","error","className","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchWord","newSearchPersons","setNewSearchPersons","setMessage","setError","useEffect","servicePerson","initialPersons","event","target","searchPersons","filter","p","toLowerCase","indexOf","preventDefault","newPerson","existPerson","find","window","confirm","returnedPerson","map","setTimeout","concat","deleteId","catch","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9e1e0205.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({handleSearch,newSearchWord}) => {\r\n    return (\r\n        <div>\r\n            filter shown with<input onChange={handleSearch} value={newSearchWord}></input>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\nconst PersonForm = ({addPerson,handleOnPersonNameChange,handleOnPersonNumberChange,newName,newNumber}) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={addPerson}>\r\n                <div>\r\n                    name:<input onChange={handleOnPersonNameChange} value={newName} />\r\n                </div>\r\n                <div>\r\n                    number:<input onChange={handleOnPersonNumberChange} value={newNumber} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Person = ({ person, deletePerson }) => {\r\n    console.log('delete person method', deletePerson)\r\n    return (\r\n        <p key={person.name}>{person.name} {person.number} <button onClick={deletePerson}>delete</button></p>\r\n    )\r\n}\r\n\r\nexport default Person","import axios from 'axios'\r\n\r\nconst baseUrl = `/api/persons`\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then((response) => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst create = (personObject) => {\r\n    const request = axios.post(baseUrl, personObject)\r\n    return request.then((response) => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst update = (id, personObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n    return request.then((response) => {\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response =>{\r\n        console.log(response)\r\n        return id\r\n    } )\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Notification = ({message,error}) => {\r\n    \r\n\r\n    if(message !== null){\r\n        return(\r\n            <div className='message'>\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n    if(error !== null){\r\n        return(\r\n            <div className='error'>\r\n                {error}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return null\r\n    \r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Person from './components/Person'\r\nimport servicePerson from './service/Persons'\r\nimport Notification from './components/Notification'\r\n\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [newSearchWord, setSearchWord] = useState('')\r\n    const [newSearchPersons, setNewSearchPersons] = useState([])\r\n    const [message, setMessage] = useState(null)\r\n    const [error, setError] = useState(null)\r\n\r\n    useEffect(() => {\r\n        servicePerson.getAll()\r\n            .then(initialPersons => {\r\n                setPersons(initialPersons)\r\n                setNewSearchPersons(initialPersons)\r\n            })\r\n    }, [])\r\n\r\n    const exitName = (p) => p.name === newName\r\n\r\n    const addPerson = (event) => {\r\n\r\n        event.preventDefault()\r\n\r\n        const newPerson = {\r\n            name: newName,\r\n            number: newNumber\r\n        }\r\n\r\n        const existPerson = persons.find((p) => p.name === newName)\r\n\r\n        if (existPerson) {\r\n            if (window.confirm(`${existPerson.name} is already added to phonebook,replace the old number with a new one ?`)) {\r\n                servicePerson.update(existPerson.id, newPerson)\r\n                    .then(returnedPerson => {\r\n                        setPersons(persons.map(p => p.id === returnedPerson.id ? returnedPerson : p))\r\n                        if (newName.toLowerCase().indexOf(newSearchWord.toLowerCase()) > -1) {\r\n                            setNewSearchPersons(newSearchPersons.map(p => p.id === returnedPerson.id ? returnedPerson : p))\r\n                        }\r\n                        setMessage(`change ${newName} number ${newNumber}`)\r\n                        setTimeout(() => {\r\n                            setMessage(null)\r\n                        }, 5000)\r\n                        setNewName('')\r\n                        setNewNumber('')\r\n                    })\r\n            }\r\n        } else {\r\n            servicePerson.create(newPerson)\r\n                .then(returnedPerson => {\r\n                    setPersons(persons.concat(returnedPerson))\r\n                    if (newName.toLowerCase().indexOf(newSearchWord.toLowerCase()) > -1) {\r\n                        setNewSearchPersons(newSearchPersons.concat(returnedPerson))\r\n                    }\r\n                    setMessage(`add ${newName}`)\r\n                    setTimeout(() => {\r\n                        setMessage(null)\r\n                    }, 5000)\r\n                    setNewName('')\r\n                    setNewNumber('')\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n    const handleOnPersonNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleOnPersonNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleSearch = (event) => {\r\n        setSearchWord(event.target.value)\r\n        if (event.target.value) {\r\n            const searchPersons = persons.filter(p => p.name.toLowerCase().indexOf(event.target.value.toLowerCase()) > -1)\r\n            setNewSearchPersons(searchPersons)\r\n        } else {\r\n            setNewSearchPersons(persons)\r\n        }\r\n    }\r\n\r\n    const deletePerson = (id) => {\r\n        var deletePerson = persons.find(p => p.id === id)\r\n        if (window.confirm(`delete ${deletePerson.name} ?`)) {\r\n            servicePerson.remove(id)\r\n                .then(deleteId => {\r\n                    setPersons(persons.filter(p => p.id !== id))\r\n                    setNewSearchPersons(newSearchPersons.filter(p => p.id !== id))\r\n                })\r\n                .catch(error => {\r\n                    const deletedPerson = persons.find(p => p.id === id)\r\n                    setPersons(persons.filter(p => p.id !== id))\r\n                    setNewSearchPersons(newSearchPersons.filter(p => p.id !== id))\r\n                    console.log('error:', error.response)\r\n                    setError(`Information of ${deletedPerson.name} has already been removed from server`)\r\n                    setTimeout(() => {\r\n                        setError(null)\r\n                    }, 5000)\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={message} error={error} />\r\n            <Filter handleSearch={handleSearch} newSearchWord={newSearchWord} />\r\n            <h2>add a new</h2>\r\n            <PersonForm addPerson={addPerson} handleOnPersonNameChange={handleOnPersonNameChange} handleOnPersonNumberChange={handleOnPersonNumberChange} newName={newName} newNumber={newNumber} />\r\n            <h2>Numbers</h2>\r\n            <div>\r\n                {newSearchPersons.map((person) => <Person key={person.id} person={person} deletePerson={() => deletePerson(person.id)} />)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />,document.getElementById('root'))"],"sourceRoot":""}